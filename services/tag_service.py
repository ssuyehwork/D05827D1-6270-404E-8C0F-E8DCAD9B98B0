# application/services/tag_service.pyfrom typing import List, Tuplefrom infrastructure.repositories.tag_repository import TagRepositoryclass TagService:    def __init__(self, tag_repository: TagRepository):        self._tag_repo = tag_repository    def get_all_tags(self) -> List[str]:        """获取所有标签名称"""        tags = self._tag_repo.get_all()        return [tag.name for tag in tags]    def get_tags_for_idea(self, idea_id: int) -> List[str]:        """获取指定笔记的标签"""        tags = self._tag_repo.get_by_idea_id(idea_id)        return [tag.name for tag in tags]    def get_top_tags(self, limit: int = 5) -> List[Tuple[str, int]]:        """获取热门标签"""        return self._tag_repo.get_top_tags(limit)    def rename_tag(self, old_name: str, new_name: str) -> None:        """重命名标签"""        if not new_name or not new_name.strip():            raise ValueError("标签名不能为空")        self._tag_repo.rename(old_name.strip(), new_name.strip())    def delete_tag(self, tag_name: str) -> None:        """删除标签"""        if not tag_name:            raise ValueError("标签名不能为空")        self._tag_repo.delete(tag_name.strip())    def get_union_tags_for_ideas(self, idea_ids: List[int]) -> List[str]:        """获取多个笔记的并集标签"""        if not idea_ids:            return []        return self._tag_repo.get_union_tags_for_ideas(idea_ids)    def get_all_tags_with_counts(self) -> List[Tuple[str, int]]:        """获取所有标签及其使用次数"""        return self._tag_repo.get_all_tags_with_counts()