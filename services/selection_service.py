# services/selection_service.pyfrom PyQt5.QtCore import QObject, pyqtSignal, QPointfrom pynput import mouseimport threadingclass SelectionMonitor(QObject):    # 定义信号：当检测到可能的划选动作时，发送鼠标当前的坐标    text_selected = pyqtSignal(QPoint)    def __init__(self):        super().__init__()        self.press_pos = None        self._is_running = True    def start(self):        # 在独立线程中启动监听，避免阻塞主界面        self.thread = threading.Thread(target=self._run_listener, daemon=True)        self.thread.start()    def _run_listener(self):        with mouse.Listener(on_click=self._on_click) as listener:            listener.join()    def _on_click(self, x, y, button, pressed):        if button == mouse.Button.left:            if pressed:                # 记录按下时的位置                self.press_pos = (x, y)            else:                # 鼠标松开时，计算移动距离                if self.press_pos:                    dx = abs(x - self.press_pos[0])                    dy = abs(y - self.press_pos[1])                    # 如果移动距离超过 15 像素，判定为划选动作                    if dx > 15 or dy > 15:                        self.text_selected.emit(QPoint(int(x), int(y)))                self.press_pos = None