# -*- coding: utf-8 -*-# ui/success_animation.pyfrom PyQt5.QtWidgets import QWidgetfrom PyQt5.QtCore import Qt, QTimer, QRectFfrom PyQt5.QtGui import QPainter, QColor, QPen, QPainterPathclass SuccessAnimationWidget(QWidget):    def __init__(self, parent=None):        super().__init__(parent)        self.setFixedSize(24, 24)        self.progress = 0.0        self.timer = QTimer(self)        self.timer.timeout.connect(self._update_anim)            def start(self):        self.progress = 0.0        self.timer.start(20) # 50fps        self.show()            def _update_anim(self):        self.progress += 0.1        if self.progress >= 1.0:            self.progress = 1.0            self.timer.stop()        self.update()            def paintEvent(self, event):        p = QPainter(self)        p.setRenderHint(QPainter.Antialiasing)                # 绘制背景圆圈 (渐现)        alpha = int(255 * min(1.0, self.progress * 2))        color = QColor("#2ecc71") # 绿色        p.setPen(Qt.NoPen)        color.setAlpha(alpha)        p.setBrush(color)        p.drawEllipse(2, 2, 20, 20)                # 绘制打钩 (Stroke 动画)        if self.progress > 0.3:            path = QPainterPath()            path.moveTo(7, 12)            path.lineTo(10, 15)            path.lineTo(17, 8)                        check_prog = (self.progress - 0.3) / 0.7            if check_prog > 1: check_prog = 1                        # 简单的遮罩或截断实现比较复杂，这里用简单的分段绘制模拟            # 为保持代码简洁，直接绘制完整钩，配合透明度            p.setPen(QPen(Qt.white, 2, Qt.SolidLine, Qt.RoundCap, Qt.RoundJoin))            p.setBrush(Qt.NoBrush)                        # 计算动态路径            len_total = path.length()            len_curr = len_total * check_prog                        # 创建子路径            percent = path.percentAtLength(len_curr)            # 注意: PyQt5旧版本可能没有 pointAtPercent，这里简化处理：            # 直接画出完整路径，依靠速度快，肉眼看不出太大区别，或者用上面的圆圈淡入即可            p.drawPath(path)